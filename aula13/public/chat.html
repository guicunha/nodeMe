<html>
    <head>
	<link href="style/gemoticons.css" type="text/css" rel="stylesheet" />
	<script src="js/jquery.min.js"></script>
	<script src="js/jquery.gemoticons.js"></script>
        <script src="socket.io/socket.io.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                var chat = io.connect();
                chat.on('connect', function() {
                    $('#mensagens').val('');
                    chat.emit('set nick', prompt('Escolha seu nick', ""));

                    chat.on('mensagem', function(mensagem) {
                        $('#mensagens').prepend('<div class="chat">' + mensagem.texto + '</div>');
                        $(".chat").gemoticon();
                        window.scrollTo(0, document.body.scrollHeight);
                    });

                    chat.on('ready', function() {
                        console.log('ready');
                        $('#enviar').click(function() {
                            chat.emit('mensagem', $('#mensagem').val());
                            $('#mensagem').val('');
                        });
                    });
                });
            });
        </script>
    </head>
    <body>
        <input type="text" name="mensagem" id="mensagem">
        <input type="button" name="enviar" id="enviar" value="enviar">
        <div class="chat" id="mensagens"></div>
    </body>
</html>